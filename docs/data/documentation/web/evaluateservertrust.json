{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Using a secure HTTPS connection when communicating with servers and web services is an important"},{"type":"text","text":" "},{"type":"text","text":"step in securing sensitive data. By default, the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Web"}]},{"type":"text","text":" library receives the same automatic TLS"},{"type":"text","text":" "},{"type":"text","text":"certificate and certificate chain evaluation as URLSession. While this guarantees the certificate"},{"type":"text","text":" "},{"type":"text","text":"chain is valid, it does not prevent man-in-the-middle (MITM) attacks or other potential"},{"type":"text","text":" "},{"type":"text","text":"vulnerabilities. In order to mitigate MITM attacks, applications dealing with sensitive customer"},{"type":"text","text":" "},{"type":"text","text":"data or financial information should use certificate or public key pinning provided by the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Web"}]},{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"library."}]},{"anchor":"Server-Trust-Policy","level":2,"type":"heading","text":"Server Trust Policy"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ServerTrustPolicy"},{"type":"text","text":" protocol provides a way to perform any sort of server trust evaluation. The"},{"type":"text","text":" "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Web"}]},{"type":"text","text":" library includes many different types of trust policies, providing composable control over"},{"type":"text","text":" "},{"type":"text","text":"the evaluation process:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DefaultServerTrustPolicy"},{"type":"text","text":" that uses the default server trust evaluation while allowing you to"},{"type":"text","text":" "},{"type":"text","text":"control whether to evaluate the host provided by the challenge."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"PinnedCertsServerTrustPolicy"},{"type":"text","text":" that uses the provided certificates to evaluate the server trust."},{"type":"text","text":" "},{"type":"text","text":"The server trust is considered valid if one of the pinned certificates match one of the server"},{"type":"text","text":" "},{"type":"text","text":"certificates. This policy can also accept self-signed certificates."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"PublicKeysServerTrustPolicy"},{"type":"text","text":" that uses the provided public keys to evaluate the server trust."},{"type":"text","text":" "},{"type":"text","text":"The server trust is considered valid if one of the pinned public keys match one of the server"},{"type":"text","text":" "},{"type":"text","text":"certificate public keys."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"TrustAllServerTrustPolicy"},{"type":"text","text":" that should only be used in debug scenarios as it disables all"},{"type":"text","text":" "},{"type":"text","text":"evaluation which in turn will always consider any server trust as valid. This policy should"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"type":"text","text":"never"}]},{"type":"text","text":" be used in production environments!"}]}]}]},{"anchor":"Create-Your-Own-Policy","level":2,"type":"heading","text":"Create Your Own Policy"},{"type":"codeListing","syntax":"swift","code":["final class MyServerTrustPolicy: ServerTrustPolicy {","   func evaluate(_ serverTrust: SecTrust, for host: String) -> Bool {","      \/\/ Do evaluation here","   }","}"]},{"anchor":"Enable-Security-in-Your-App","level":2,"type":"heading","text":"Enable Security in Your App"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"URLSessionWebClientConfiguration"},{"type":"text","text":" is responsible for storing an internal mapping of"},{"type":"text","text":" "},{"type":"codeVoice","code":"ServerTrustPolicy"},{"type":"text","text":" values to a particular host. This allows the web client to evaluate each host"},{"type":"text","text":" "},{"type":"text","text":"with different evaluators. To apply policy for all hosts except specified use "},{"type":"codeVoice","code":"*"},{"type":"text","text":" as host name."}]},{"type":"codeListing","syntax":"swift","code":["let configuration: URLSessionWebClientConfiguration = .default","configuration.serverTrustPolicies = [","   \"cert.example.com\": PinnedCertsServerTrustPolicy(),","   \"keys.example.com\": PublicKeysServerTrustPolicy(),","   \"*\": DefaultServerTrustPolicy()","]"]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/web\/evaluateservertrust"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Web\/documentation\/Web\/EvaluateServerTrust","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Read how to send requests and receive response in a secure way."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Evaluate Server Trust","role":"article","modules":[{"name":"Web"}]},"hierarchy":{"paths":[["doc:\/\/Web\/documentation\/Web"]]},"seeAlsoSections":[{"title":"Security","identifiers":["doc:\/\/Web\/documentation\/Web\/ServerTrustPolicy","doc:\/\/Web\/documentation\/Web\/TrustAllServerTrustPolicy","doc:\/\/Web\/documentation\/Web\/DefaultServerTrustPolicy","doc:\/\/Web\/documentation\/Web\/PinnedCertsServerTrustPolicy","doc:\/\/Web\/documentation\/Web\/PublicKeysServerTrustPolicy"],"generated":true}],"references":{"doc://Web/documentation/Web/ServerTrustPolicy":{"role":"symbol","title":"ServerTrustPolicy","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ServerTrustPolicy"}],"abstract":[{"type":"text","text":"A protocol you need to implement to perform server trust evaluation."}],"identifier":"doc:\/\/Web\/documentation\/Web\/ServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ServerTrustPolicy"}],"url":"\/documentation\/web\/servertrustpolicy"},"doc://Web/documentation/Web":{"role":"collection","title":"Web","abstract":[{"type":"emphasis","inlineContent":[{"type":"text","text":"Web"}]},{"type":"text","text":" is a network library that provides you with a full-featured web client built on top of new"},{"type":"text","text":" "},{"type":"text","text":"concurrency model introduced in Swift 5.5."}],"identifier":"doc:\/\/Web\/documentation\/Web","kind":"symbol","type":"topic","url":"\/documentation\/web"},"doc://Web/documentation/Web/PublicKeysServerTrustPolicy":{"role":"symbol","title":"PublicKeysServerTrustPolicy","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"PublicKeysServerTrustPolicy"}],"abstract":[{"type":"text","text":"A policy that uses the pinned public keys to validate the server trust."}],"identifier":"doc:\/\/Web\/documentation\/Web\/PublicKeysServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PublicKeysServerTrustPolicy"}],"url":"\/documentation\/web\/publickeysservertrustpolicy"},"doc://Web/documentation/Web/TrustAllServerTrustPolicy":{"role":"symbol","title":"TrustAllServerTrustPolicy","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"TrustAllServerTrustPolicy"}],"abstract":[{"type":"text","text":"Policy that always considers server trust as valid."}],"identifier":"doc:\/\/Web\/documentation\/Web\/TrustAllServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TrustAllServerTrustPolicy"}],"url":"\/documentation\/web\/trustallservertrustpolicy"},"doc://Web/documentation/Web/DefaultServerTrustPolicy":{"role":"symbol","title":"DefaultServerTrustPolicy","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"DefaultServerTrustPolicy"}],"abstract":[{"type":"text","text":"A policy that uses the default server trust evaluation."}],"identifier":"doc:\/\/Web\/documentation\/Web\/DefaultServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DefaultServerTrustPolicy"}],"url":"\/documentation\/web\/defaultservertrustpolicy"},"doc://Web/documentation/Web/PinnedCertsServerTrustPolicy":{"role":"symbol","title":"PinnedCertsServerTrustPolicy","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"PinnedCertsServerTrustPolicy"}],"abstract":[{"type":"text","text":"A policy that uses pinned certificates to evaluate the server trust."}],"identifier":"doc:\/\/Web\/documentation\/Web\/PinnedCertsServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PinnedCertsServerTrustPolicy"}],"url":"\/documentation\/web\/pinnedcertsservertrustpolicy"}}}